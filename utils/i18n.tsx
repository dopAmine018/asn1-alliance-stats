
import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import { Language } from '../types';

type TranslationKey = 
  | 'nav.public' | 'nav.admin' | 'nav.logout'
  | 'form.title' | 'form.success' | 'form.submit' | 'form.saving' | 'form.optional' | 'form.required_error'
  | 'section.identity' | 'section.identity.desc' | 'section.power' | 'section.power.desc' | 'section.techtree' | 'section.techtree.desc'
  | 'section.buildings' | 'section.buildings.status'
  | 'label.language' | 'label.name' | 'label.power' | 'label.squad2' | 'label.squad3' | 'label.squad4' | 'label.totalHeroPower'
  | 'label.pin_locked' | 'label.pin_optional' | 'label.pin_req' | 'label.pin_set' | 'msg.forgot_pin' | 'err.pin_mismatch'
  | 'placeholder.server_rank'
  | 'stat.hero' | 'stat.duel' | 'stat.units'
  | 't10.title' | 't10.morale' | 't10.protection' | 't10.hp' | 't10.atk' | 't10.def'
  | 'level.tech' | 'level.barracks' | 'level.tank' | 'level.air' | 'level.missile'
  | 'card.hero_pwr' | 'card.tech_short' | 'card.barr_short' | 'card.tank_short' | 'card.air_short' | 'card.misl_short'
  | 'viewer.leaderboard' | 'viewer.search' | 'viewer.sort' | 'viewer.showing' | 'viewer.no_results' | 'viewer.updated' | 'viewer.export'
  | 'sort.newest' | 'sort.oldest' | 'sort.highest_power' | 'sort.lowest_power'
  | 'sort.highest_total_hero_power' | 'sort.lowest_total_hero_power'
  | 'admin.login.title' | 'admin.login.btn' | 'admin.dashboard' | 'admin.password' | 'admin.db' | 'admin.vs' | 'admin.filter'
  | 'admin.active_only' | 'admin.all_records' | 'admin.status' | 'admin.identity' | 'admin.control' | 'admin.terminate' | 'admin.save' | 'admin.cancel' | 'admin.edit' | 'admin.del'
  | 'vs.select' | 'vs.create_btn' | 'vs.extract' | 'vs.modal_title' | 'vs.modal_placeholder' | 'vs.abort' | 'vs.launch' 
  | 'vs.agent' | 'vs.sum' | 'vs.add_agent_ph' | 'vs.inject' | 'vs.awaiting'
  | 'day.mon' | 'day.tue' | 'day.wed' | 'day.thu' | 'day.fri' | 'day.sat';

const translations: Record<Language, Record<TranslationKey, string>> = {
  english: {
    'nav.public': 'Public View',
    'nav.admin': 'Admin Panel',
    'nav.logout': 'Logout',
    'form.title': 'Submit / Update Stats',
    'form.success': 'Stats saved successfully!',
    'form.submit': 'Save Player Stats',
    'form.saving': 'Saving...',
    'form.optional': 'Optional',
    'form.required_error': 'Please fill all required fields (Squads, Hero Power, Buildings)',
    'section.identity': '01 // Identity',
    'section.identity.desc': 'Verify commander credentials. Name must match in-game profile exactly.',
    'section.power': '02 // Combat Power',
    'section.power.desc': 'Smart Format: 24.5 = 24.5M',
    'section.techtree': '03 // Tech',
    'section.techtree.desc': 'Fill these values from your Tech Center stats.',
    'section.buildings': '04 // Building Levels',
    'section.buildings.status': 'System Status: Online',
    'label.language': 'Language',
    'label.name': 'In-game name',
    'label.power': 'First Squad Power',
    'label.squad2': 'Squad 2',
    'label.squad3': 'Squad 3',
    'label.squad4': 'Squad 4',
    'label.totalHeroPower': 'Total Hero Power',
    'label.pin_locked': 'ðŸ”’ Security PIN (Locked)',
    'label.pin_optional': 'ðŸ›¡ï¸ Security PIN (Optional)',
    'label.pin_req': 'Required to update',
    'label.pin_set': 'Set for quick filling',
    'msg.forgot_pin': 'Forgot PIN? Contact R5/4 in game',
    'err.pin_mismatch': 'Locked Profile: Incorrect PIN',
    'placeholder.server_rank': 'Get it from Server Rankings',
    'stat.hero': 'Hero %',
    'stat.duel': "VS 'Duel' %",
    'stat.units': 'Units %',
    't10.title': 'Tier 10 Bonuses',
    't10.morale': 'T10 advancement+morale [Morale]',
    't10.protection': 'T10 advancement+morale [Advanced Protection]',
    't10.hp': 'T10 advancement+morale [HP Boost 3]',
    't10.atk': 'T10 advancement+morale [Attack Boost 3]',
    't10.def': 'T10 advancement+morale [Defense Boost 3]',
    'level.tech': 'Tech Center',
    'level.barracks': 'Barracks',
    'level.tank': 'Tank Center',
    'level.air': 'Air Center',
    'level.missile': 'Missile Center',
    'card.hero_pwr': 'HERO PWR',
    'card.tech_short': 'Tech',
    'card.barr_short': 'Barr',
    'card.tank_short': 'Tank',
    'card.air_short': 'Air',
    'card.misl_short': 'Misl',
    'viewer.leaderboard': 'Leaderboard',
    'viewer.search': 'Search name...',
    'viewer.sort': 'Sort by',
    'viewer.showing': 'Showing active players',
    'viewer.no_results': 'No players found matching your criteria.',
    'viewer.updated': 'Updated',
    'viewer.export': 'Export CSV',
    'sort.newest': 'Newest Update',
    'sort.oldest': 'Oldest Update',
    'sort.highest_power': 'Highest Power',
    'sort.lowest_power': 'Lowest Power',
    'sort.highest_total_hero_power': 'Highest Hero Power',
    'sort.lowest_total_hero_power': 'Lowest Hero Power',
    'admin.login.title': 'Admin Access',
    'admin.login.btn': 'Unlock Panel',
    'admin.dashboard': 'Admin Dashboard',
    'admin.password': 'Enter Password',
    'admin.db': 'Database',
    'admin.vs': 'VS Duel',
    'admin.filter': 'Filter Records...',
    'admin.active_only': 'Active Only',
    'admin.all_records': 'All Records',
    'admin.status': 'Status',
    'admin.identity': 'Identity',
    'admin.control': 'Control',
    'admin.terminate': 'Terminate Session',
    'admin.save': 'Save',
    'admin.cancel': 'Cancel',
    'admin.edit': 'Edit',
    'admin.del': 'Del',
    'vs.select': 'Select Duel',
    'vs.create_btn': '+ Duel',
    'vs.extract': 'Extract Data',
    'vs.modal_title': 'Init VS Duel',
    'vs.modal_placeholder': 'Duel Name (e.g. Week 4)',
    'vs.abort': 'Abort',
    'vs.launch': 'Launch',
    'vs.agent': 'Agent',
    'vs.sum': 'Sum',
    'vs.add_agent_ph': 'Add Agent...',
    'vs.inject': 'Inject Row',
    'vs.awaiting': 'Awaiting Duel Selection...',
    'day.mon': 'Mon',
    'day.tue': 'Tue',
    'day.wed': 'Wed',
    'day.thu': 'Thu',
    'day.fri': 'Fri',
    'day.sat': 'Sat',
  },
  arabic: {
    'nav.public': 'Ø¹Ø±Ø¶ Ø¹Ø§Ù…',
    'nav.admin': 'Ù„ÙˆØ­Ø© Ø§Ù„Ù…Ø´Ø±Ù',
    'nav.logout': 'ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬',
    'form.title': 'Ø¥Ø±Ø³Ø§Ù„ / ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',
    'form.success': 'ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­!',
    'form.submit': 'Ø­ÙØ¸ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª',
    'form.saving': 'Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸...',
    'form.optional': 'Ø§Ø®ØªÙŠØ§Ø±ÙŠ',
    'form.required_error': 'ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© (Ø§Ù„ÙØ±Ù‚ØŒ Ù‚ÙˆØ© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ØŒ Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ)',
    'section.identity': '01 // Ø§Ù„Ù‡ÙˆÙŠØ©',
    'section.identity.desc': 'ØªØ­Ù‚Ù‚ Ù…Ù† Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø§Ø¦Ø¯. ÙŠØ¬Ø¨ Ø£Ù† ÙŠØªØ·Ø§Ø¨Ù‚ Ø§Ù„Ø§Ø³Ù… ØªÙ…Ø§Ù…Ø§Ù‹ Ù…Ø¹ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø©.',
    'section.power': '02 // Ø§Ù„Ù‚ÙˆØ© Ø§Ù„Ù‚ØªØ§Ù„ÙŠØ©',
    'section.power.desc': 'Ø§Ù„ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø°ÙƒÙŠ: 24.5 = 24.5 Ù…Ù„ÙŠÙˆÙ†',
    'section.techtree': '03 // Ø§Ù„ØªÙ‚Ù†ÙŠØ©',
    'section.techtree.desc': 'Ø§Ù…Ù„Ø£ Ù‡Ø°Ù‡ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ø±ÙƒØ² Ø§Ù„ØªÙ‚Ù†ÙŠØ©.',
    'section.buildings': '04 // Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ù…Ø¨Ø§Ù†ÙŠ',
    'section.buildings.status': 'Ø­Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…: Ù…ØªØµÙ„',
    'label.language': 'Ø§Ù„Ù„ØºØ©',
    'label.name': 'Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø©',
    'label.power': 'Ù‚ÙˆØ© Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø£ÙˆÙ„',
    'label.squad2': 'Ø§Ù„ÙØ±ÙŠÙ‚ 2',
    'label.squad3': 'Ø§Ù„ÙØ±ÙŠÙ‚ 3',
    'label.squad4': 'Ø§Ù„ÙØ±ÙŠÙ‚ 4',
    'label.totalHeroPower': 'Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ù‚ÙˆØ© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„',
    'label.pin_locked': 'ðŸ”’ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ (Ù…ØºÙ„Ù‚)',
    'label.pin_optional': 'ðŸ›¡ï¸ Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)',
    'label.pin_req': 'Ù…Ø·Ù„ÙˆØ¨ Ù„Ù„ØªØ­Ø¯ÙŠØ«',
    'label.pin_set': 'ØªØ¹ÙŠÙŠÙ† Ù„Ù„ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©',
    'msg.forgot_pin': 'Ù†Ø³ÙŠØª Ø§Ù„Ø±Ù…Ø²ØŸ ØªÙˆØ§ØµÙ„ Ù…Ø¹ R5/4 ÙÙŠ Ø§Ù„Ù„Ø¹Ø¨Ø©',
    'err.pin_mismatch': 'Ø§Ù„Ù…Ù„Ù Ù…ØºÙ„Ù‚: Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­',
    'placeholder.server_rank': 'Ø§Ø­ØµÙ„ Ø¹Ù„ÙŠÙ‡Ø§ Ù…Ù† ØªØµÙ†ÙŠÙØ§Øª Ø§Ù„Ø³ÙŠØ±ÙØ±',
    'stat.hero': 'Ø§Ù„Ø£Ø¨Ø·Ø§Ù„%',
    'stat.duel': 'Ù…Ø¨Ø§Ø±Ø²Ø© Ø§Ù„ØªØ­Ø§Ù„Ù %',
    'stat.units': 'Ø§Ù„Ø¬Ù†ÙˆØ¯ %',
    't10.title': 'Ù…ÙƒØ§ÙØ¢Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ 10',
    't10.morale': 'ØªÙ‚Ø¯Ù… Ø§Ù„Ø¬Ù†ÙˆØ¯ 10+Ø§Ù„Ø¬Ø¨Ø±ÙˆØª [Ø§Ù„Ø¬Ø¨Ø±ÙˆØª]',
    't10.protection': 'ØªÙ‚Ø¯Ù… Ø§Ù„Ø¬Ù†ÙˆØ¯ 10+Ø§Ù„Ø¬Ø¨Ø±ÙˆØª [Ø­Ù…Ø§ÙŠØ© Ù…ØªÙ‚Ø¯Ù…Ø©]',
    't10.hp': 'ØªÙ‚Ø¯Ù… Ø§Ù„Ø¬Ù†ÙˆØ¯ 10+Ø§Ù„Ø¬Ø¨Ø±ÙˆØª [ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø­ÙŠØ§Ø© 3]',
    't10.atk': 'ØªÙ‚Ø¯Ù… Ø§Ù„Ø¬Ù†ÙˆØ¯ 10+Ø§Ù„Ø¬Ø¨Ø±ÙˆØª [ØªØ¹Ø²ÙŠØ² Ø§Ù„Ù‡Ø¬ÙˆÙ… 3]',
    't10.def': 'ØªÙ‚Ø¯Ù… Ø§Ù„Ø¬Ù†ÙˆØ¯ 10+Ø§Ù„Ø¬Ø¨Ø±ÙˆØª [ØªØ¹Ø²ÙŠØ² Ø§Ù„Ø¯ÙØ§Ø¹ 3]',
    'level.tech': 'Ù…Ø±ÙƒØ² Ø§Ù„ØªÙ‚Ù†ÙŠØ©',
    'level.barracks': 'Ø§Ù„Ø«ÙƒÙ†Ø©',
    'level.tank': 'Ù…Ø±ÙƒØ² Ø§Ù„Ø¯Ø¨Ø§Ø¨Ø§Øª',
    'level.air': 'Ù…Ø±ÙƒØ² Ø§Ù„Ø·ÙŠØ±Ø§Ù†',
    'level.missile': 'Ù…Ø±ÙƒØ² Ø§Ù„ØµÙˆØ§Ø±ÙŠØ®',
    'card.hero_pwr': 'Ù‚ÙˆØ© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„',
    'card.tech_short': 'ØªÙ‚Ù†ÙŠØ©',
    'card.barr_short': 'Ø«ÙƒÙ†Ø©',
    'card.tank_short': 'Ø¯Ø¨Ø§Ø¨Ø©',
    'card.air_short': 'Ø·ÙŠØ±Ø§Ù†',
    'card.misl_short': 'ØµÙˆØ§Ø±ÙŠØ®',
    'viewer.leaderboard': 'Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØµØ¯Ø±ÙŠÙ†',
    'viewer.search': 'Ø¨Ø­Ø« Ø¹Ù† Ø§Ø³Ù…...',
    'viewer.sort': 'ØªØ±ØªÙŠØ¨ Ø­Ø³Ø¨',
    'viewer.showing': 'Ù„Ø§Ø¹Ø¨ Ù†Ø´Ø·',
    'viewer.no_results': 'Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù„Ø§Ø¹Ø¨ÙŠÙ†.',
    'viewer.updated': 'ØªØ­Ø¯ÙŠØ«',
    'viewer.export': 'ØªØµØ¯ÙŠØ± CSV',
    'sort.newest': 'Ø§Ù„Ø£Ø­Ø¯Ø«',
    'sort.oldest': 'Ø§Ù„Ø£Ù‚Ø¯Ù…',
    'sort.highest_power': 'Ø§Ù„Ø£Ø¹Ù„Ù‰ Ù‚ÙˆØ©',
    'sort.lowest_power': 'Ø§Ù„Ø£Ù‚Ù„ Ù‚ÙˆØ©',
    'sort.highest_total_hero_power': 'Ø£Ø¹Ù„Ù‰ Ù‚ÙˆØ© Ø£Ø¨Ø·Ø§Ù„',
    'sort.lowest_total_hero_power': 'Ø£Ù‚Ù„ Ù‚ÙˆØ© Ø£Ø¨Ø·Ø§Ù„',
    'admin.login.title': 'Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø´Ø±Ù',
    'admin.login.btn': 'Ø¯Ø®ÙˆÙ„',
    'admin.dashboard': 'Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø´Ø±Ù',
    'admin.password': 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±',
    'admin.db': 'Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
    'admin.vs': 'ØªØ­Ø¯ÙŠ VS',
    'admin.filter': 'ØªØµÙÙŠØ© Ø§Ù„Ø³Ø¬Ù„Ø§Øª...',
    'admin.active_only': 'Ø§Ù„Ù†Ø´Ø·ÙŠÙ† ÙÙ‚Ø·',
    'admin.all_records': 'ÙƒÙ„ Ø§Ù„Ø³Ø¬Ù„Ø§Øª',
    'admin.status': 'Ø§Ù„Ø­Ø§Ù„Ø©',
    'admin.identity': 'Ø§Ù„Ù‡ÙˆÙŠØ©',
    'admin.control': 'ØªØ­ÙƒÙ…',
    'admin.terminate': 'Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø¬Ù„Ø³Ø©',
    'admin.save': 'Ø­ÙØ¸',
    'admin.cancel': 'Ø¥Ù„ØºØ§Ø¡',
    'admin.edit': 'ØªØ¹Ø¯ÙŠÙ„',
    'admin.del': 'Ø­Ø°Ù',
    'vs.select': 'Ø§Ø®ØªØ± Ø§Ù„ØªØ­Ø¯ÙŠ',
    'vs.create_btn': '+ ØªØ­Ø¯ÙŠ',
    'vs.extract': 'Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª',
    'vs.modal_title': 'Ø¨Ø¯Ø¡ ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯',
    'vs.modal_placeholder': 'Ø§Ø³Ù… Ø§Ù„ØªØ­Ø¯ÙŠ (Ù…Ø«Ø§Ù„: Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 4)',
    'vs.abort': 'Ø¥Ù„ØºØ§Ø¡',
    'vs.launch': 'Ø¥Ø·Ù„Ø§Ù‚',
    'vs.agent': 'Ø§Ù„Ø¹Ù…ÙŠÙ„',
    'vs.sum': 'Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹',
    'vs.add_agent_ph': 'Ø£Ø¶Ù Ø¹Ù…ÙŠÙ„...',
    'vs.inject': 'Ø¥Ø¯Ø±Ø§Ø¬ ØµÙ',
    'vs.awaiting': 'Ø¨Ø§Ù†ØªØ¸Ø§Ø± Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØªØ­Ø¯ÙŠ...',
    'day.mon': 'Ø§Ù„Ø¥Ø«Ù†ÙŠÙ†',
    'day.tue': 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡',
    'day.wed': 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡',
    'day.thu': 'Ø§Ù„Ø®Ù…ÙŠØ³',
    'day.fri': 'Ø§Ù„Ø¬Ù…Ø¹Ø©',
    'day.sat': 'Ø§Ù„Ø³Ø¨Øª',
  },
  turkish: {
    'nav.public': 'Genel GÃ¶rÃ¼nÃ¼m',
    'nav.admin': 'YÃ¶netici Paneli',
    'nav.logout': 'Ã‡Ä±kÄ±ÅŸ',
    'form.title': 'Ä°statistik GÃ¶nder / GÃ¼ncelle',
    'form.success': 'Ä°statistikler baÅŸarÄ±yla kaydedildi!',
    'form.submit': 'Ä°statistikleri Kaydet',
    'form.saving': 'Kaydediliyor...',
    'form.optional': 'Ä°steÄŸe baÄŸlÄ±',
    'form.required_error': 'LÃ¼tfen gerekli tÃ¼m alanlarÄ± doldurun (TakÄ±mlar, Kahraman GÃ¼cÃ¼, Binalar)',
    'section.identity': '01 // Kimlik',
    'section.identity.desc': 'Komutan bilgilerini doÄŸrulayÄ±n. Ä°sim oyun iÃ§i profille tam eÅŸleÅŸmelidir.',
    'section.power': '02 // SavaÅŸ GÃ¼cÃ¼',
    'section.power.desc': 'AkÄ±llÄ± Format: 24.5 = 24.5M',
    'section.techtree': '03 // Teknoloji',
    'section.techtree.desc': 'Bu deÄŸerleri Teknoloji Merkezi istatistiklerinizden doldurun.',
    'section.buildings': '04 // Bina Seviyeleri',
    'section.buildings.status': 'Sistem Durumu: Ã‡evrimiÃ§i',
    'label.language': 'Dil',
    'label.name': 'Oyun Ä°Ã§i Ä°sim',
    'label.power': '1. TakÄ±m GÃ¼cÃ¼',
    'label.squad2': '2. TakÄ±m',
    'label.squad3': '3. TakÄ±m',
    'label.squad4': '4. TakÄ±m',
    'label.totalHeroPower': 'Toplam Kahraman GÃ¼cÃ¼',
    'label.pin_locked': 'ðŸ”’ GÃ¼venlik PIN (Kilitli)',
    'label.pin_optional': 'ðŸ›¡ï¸ GÃ¼venlik PIN (Ä°steÄŸe BaÄŸlÄ±)',
    'label.pin_req': 'GÃ¼ncelleme iÃ§in gerekli',
    'label.pin_set': 'HÄ±zlÄ± doldurma iÃ§in ayarla',
    'msg.forgot_pin': 'PIN unuttunuz mu? Oyunda R5/4 ile iletiÅŸime geÃ§in',
    'err.pin_mismatch': 'Kilitli Profil: HatalÄ± PIN',
    'placeholder.server_rank': 'Sunucu SÄ±ralamasÄ±ndan al',
    'stat.hero': 'Kahraman %',
    'stat.duel': "VS 'DÃ¼ello' %",
    'stat.units': 'Birim %',
    't10.title': 'Seviye 10 BonuslarÄ±',
    't10.morale': 'T10 Ä°lerlemesi + Moral [Moral]',
    't10.protection': 'T10 Ä°lerlemesi + Moral [GeliÅŸmiÅŸ Koruma]',
    't10.hp': 'T10 Ä°lerlemesi + Moral [HP ArtÄ±ÅŸÄ± 3]',
    't10.atk': 'T10 Ä°lerlemesi + Moral [SaldÄ±rÄ± ArtÄ±ÅŸÄ± 3]',
    't10.def': 'T10 Ä°lerlemesi + Moral [Savunma ArtÄ±ÅŸÄ± 3]',
    'level.tech': 'Teknoloji Mrk.',
    'level.barracks': 'KÄ±ÅŸla',
    'level.tank': 'Tank Mrk.',
    'level.air': 'Hava Mrk.',
    'level.missile': 'FÃ¼ze Mrk.',
    'card.hero_pwr': 'KAHRAMAN GÃœCÃœ',
    'card.tech_short': 'Tekn',
    'card.barr_short': 'KÄ±ÅŸla',
    'card.tank_short': 'Tank',
    'card.air_short': 'Hava',
    'card.misl_short': 'FÃ¼ze',
    'viewer.leaderboard': 'Liderlik Tablosu',
    'viewer.search': 'Ä°sim ara...',
    'viewer.sort': 'SÄ±rala',
    'viewer.showing': 'aktif oyuncu gÃ¶steriliyor',
    'viewer.no_results': 'Kriterlere uygun oyuncu bulunamadÄ±.',
    'viewer.updated': 'GÃ¼ncellendi',
    'viewer.export': 'CSV Ä°ndir',
    'sort.newest': 'En Yeni',
    'sort.oldest': 'En Eski',
    'sort.highest_power': 'En YÃ¼ksek GÃ¼Ã§',
    'sort.lowest_power': 'En DÃ¼ÅŸÃ¼k GÃ¼Ã§',
    'sort.highest_total_hero_power': 'En YÃ¼ksek Kahraman GÃ¼cÃ¼',
    'sort.lowest_total_hero_power': 'En DÃ¼ÅŸÃ¼k Kahraman GÃ¼cÃ¼',
    'admin.login.title': 'YÃ¶netici GiriÅŸi',
    'admin.login.btn': 'GiriÅŸ',
    'admin.dashboard': 'YÃ¶netici Paneli',
    'admin.password': 'Åžifre',
    'admin.db': 'VeritabanÄ±',
    'admin.vs': 'VS DÃ¼ellosu',
    'admin.filter': 'KayÄ±tlarÄ± Filtrele...',
    'admin.active_only': 'Sadece Aktif',
    'admin.all_records': 'TÃ¼m KayÄ±tlar',
    'admin.status': 'Durum',
    'admin.identity': 'Kimlik',
    'admin.control': 'Kontrol',
    'admin.terminate': 'Oturumu SonlandÄ±r',
    'admin.save': 'Kaydet',
    'admin.cancel': 'Ä°ptal',
    'admin.edit': 'DÃ¼zenle',
    'admin.del': 'Sil',
    'vs.select': 'DÃ¼ello SeÃ§',
    'vs.create_btn': '+ DÃ¼ello',
    'vs.extract': 'Veri Ã‡Ä±kar',
    'vs.modal_title': 'VS DÃ¼ellosu BaÅŸlat',
    'vs.modal_placeholder': 'DÃ¼ello AdÄ± (Ã¶rn. Hafta 4)',
    'vs.abort': 'Ä°ptal',
    'vs.launch': 'BaÅŸlat',
    'vs.agent': 'Ajan',
    'vs.sum': 'Toplam',
    'vs.add_agent_ph': 'Ajan Ekle...',
    'vs.inject': 'SatÄ±r Ekle',
    'vs.awaiting': 'DÃ¼ello SeÃ§imi Bekleniyor...',
    'day.mon': 'Pzt',
    'day.tue': 'Sal',
    'day.wed': 'Ã‡ar',
    'day.thu': 'Per',
    'day.fri': 'Cum',
    'day.sat': 'Cmt',
  },
  indonesian: {
    'nav.public': 'Tampilan Publik',
    'nav.admin': 'Panel Admin',
    'nav.logout': 'Keluar',
    'form.title': 'Kirim / Perbarui Statistik',
    'form.success': 'Statistik berhasil disimpan!',
    'form.submit': 'Simpan Statistik',
    'form.saving': 'Menyimpan...',
    'form.optional': 'Opsional',
    'form.required_error': 'Harap isi semua kolom yang wajib diisi (Pasukan, Kekuatan Hero, Bangunan)',
    'section.identity': '01 // Identitas',
    'section.identity.desc': 'Verifikasi kredensial komandan. Nama harus sama persis dengan profil dalam game.',
    'section.power': '02 // Kekuatan Tempur',
    'section.power.desc': 'Format Cerdas: 24.5 = 24.5M',
    'section.techtree': '03 // Teknologi',
    'section.techtree.desc': 'Isi nilai-nilai ini dari statistik Pusat Teknologi Anda.',
    'section.buildings': '04 // Level Bangunan',
    'section.buildings.status': 'Status Sistem: Online',
    'label.language': 'Bahasa',
    'label.name': 'Nama Dalam Game',
    'label.power': 'Kekuatan Pasukan Pertama',
    'label.squad2': 'Pasukan 2',
    'label.squad3': 'Pasukan 3',
    'label.squad4': 'Pasukan 4',
    'label.totalHeroPower': 'Total Kekuatan Hero',
    'label.pin_locked': 'ðŸ”’ PIN Keamanan (Terkunci)',
    'label.pin_optional': 'ðŸ›¡ï¸ PIN Keamanan (Opsional)',
    'label.pin_req': 'Wajib untuk pembaruan',
    'label.pin_set': 'Atur untuk pengisian cepat',
    'msg.forgot_pin': 'Lupa PIN? Hubungi R5/4 di game',
    'err.pin_mismatch': 'Profil Terkunci: PIN Salah',
    'placeholder.server_rank': 'Dapatkan dari Peringkat Server',
    'stat.hero': "Hero %",
    'stat.duel': "VS 'Duel' %",
    'stat.units': 'Unit %',
    't10.title': 'Bonus Tier 10',
    't10.morale': 'Perkembangan T10 + Moral [Moral]',
    't10.protection': 'Perkembangan T10 + Moral [Perlindungan Lanjut]',
    't10.hp': 'Perkembangan T10 + Moral [Peningkatan HP 3]',
    't10.atk': 'Perkembangan T10 + Moral [Peningkatan ATK 3]',
    't10.def': 'Perkembangan T10 + Moral [Peningkatan DEF 3]',
    'level.tech': 'Pusat Teknologi',
    'level.barracks': 'Barak',
    'level.tank': 'Pusat Tank',
    'level.air': 'Pusat Udara',
    'level.missile': 'Pusat Rudal',
    'card.hero_pwr': 'KEKUATAN HERO',
    'card.tech_short': 'Tek',
    'card.barr_short': 'Barak',
    'card.tank_short': 'Tank',
    'card.air_short': 'Udara',
    'card.misl_short': 'Rudal',
    'viewer.leaderboard': 'Papan Peringkat',
    'viewer.search': 'Cari nama...',
    'viewer.sort': 'Urutkan',
    'viewer.showing': 'pemain aktif',
    'viewer.no_results': 'Tidak ada pemain ditemukan.',
    'viewer.updated': 'Diperbarui',
    'viewer.export': 'Ekspor CSV',
    'sort.newest': 'Terbaru',
    'sort.oldest': 'Terlama',
    'sort.highest_power': 'Kekuatan Tertinggi',
    'sort.lowest_power': 'Kekuatan Terendah',
    'sort.highest_total_hero_power': 'Kekuatan Hero Tertinggi',
    'sort.lowest_total_hero_power': 'Kekuatan Hero Terendah',
    'admin.login.title': 'Login Admin',
    'admin.login.btn': 'Masuk',
    'admin.dashboard': 'Dasbor Admin',
    'admin.password': 'Kata Sandi',
    'admin.db': 'Database',
    'admin.vs': 'Duel VS',
    'admin.filter': 'Filter Rekaman...',
    'admin.active_only': 'Hanya Aktif',
    'admin.all_records': 'Semua Rekaman',
    'admin.status': 'Status',
    'admin.identity': 'Identitas',
    'admin.control': 'Kontrol',
    'admin.terminate': 'Akhiri Sesi',
    'admin.save': 'Simpan',
    'admin.cancel': 'Batal',
    'admin.edit': 'Ubah',
    'admin.del': 'Hapus',
    'vs.select': 'Pilih Duel',
    'vs.create_btn': '+ Duel',
    'vs.extract': 'Ekstrak Data',
    'vs.modal_title': 'Mulai Duel VS',
    'vs.modal_placeholder': 'Nama Duel (mis. Minggu 4)',
    'vs.abort': 'Batalkan',
    'vs.launch': 'Luncurkan',
    'vs.agent': 'Agen',
    'vs.sum': 'Jumlah',
    'vs.add_agent_ph': 'Tambah Agen...',
    'vs.inject': 'Masukkan Baris',
    'vs.awaiting': 'Menunggu Pilihan Duel...',
    'day.mon': 'Sen',
    'day.tue': 'Sel',
    'day.wed': 'Rab',
    'day.thu': 'Kam',
    'day.fri': 'Jum',
    'day.sat': 'Sab',
  }
};

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: TranslationKey) => string;
  dir: 'ltr' | 'rtl';
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>('english');

  useEffect(() => {
    // Detect Browser Language
    const browserLang = navigator.language.split('-')[0];
    if (browserLang === 'ar') setLanguage('arabic');
    else if (browserLang === 'tr') setLanguage('turkish');
    else if (browserLang === 'id') setLanguage('indonesian');
    else setLanguage('english');
  }, []);

  const t = (key: TranslationKey): string => {
    return translations[language][key] || key;
  };

  const dir = language === 'arabic' ? 'rtl' : 'ltr';

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, dir }}>
      <div dir={dir} className={language === 'arabic' ? 'font-sans' : ''}>
        {children}
      </div>
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};
