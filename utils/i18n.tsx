import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';
import { Language } from '../types';

type TranslationKey = 
  | 'nav.public' | 'nav.admin' | 'nav.logout' | 'nav.home' | 'nav.train_public' | 'nav.manual'
  | 'landing.welcome' | 'landing.subtitle' 
  | 'landing.action.update' | 'landing.action.update.desc' 
  | 'landing.action.view' | 'landing.action.view.desc'
  | 'landing.action.train' | 'landing.action.train.desc'
  | 'landing.stat.members' | 'landing.stat.power' | 'landing.stat.active'
  | 'form.title' | 'form.success' | 'form.submit' | 'form.saving' | 'form.optional' | 'form.required_error'
  | 'section.identity' | 'section.identity.desc' | 'section.power' | 'section.power.desc' 
  | 'section.tech' | 'section.tech.desc'
  | 'section.infrastructure' | 'section.infrastructure.desc'
  | 'section.t10' | 'section.t10.desc'
  | 'label.language' | 'label.name' | 'label.power' | 'label.squad2' | 'label.squad3' | 'label.squad4' | 'label.totalHeroPower'
  | 'placeholder.server_rank' | 'hint.server_rank'
  | 'stat.hero' | 'stat.duel' | 'stat.units'
  | 't10.title' | 't10.morale' | 't10.protection' | 't10.hp' | 't10.atk' | 't10.def'
  | 'calc.title' | 'calc.gold' | 'calc.valor' | 'calc.food_iron' | 'calc.remaining'
  | 'level.tech' | 'level.barracks' | 'level.tank' | 'level.air' | 'level.missile'
  | 'card.hero_pwr' | 'card.tech_short' | 'card.barr_short' | 'card.tank_short' | 'card.air_short' | 'card.misl_short'
  | 'viewer.leaderboard' | 'viewer.search' | 'viewer.sort' | 'viewer.showing' | 'viewer.no_results' | 'viewer.updated' | 'viewer.export' | 'viewer.excel' | 'viewer.back'
  | 'sort.newest' | 'sort.oldest' | 'sort.highest_power' | 'sort.lowest_power'
  | 'sort.highest_total_hero_power' | 'sort.lowest_total_hero_power' | 'sort.t10_closest'
  | 'admin.login.title' | 'admin.login.btn' | 'admin.dashboard' | 'admin.password' | 'admin.db' | 'admin.vs' | 'admin.train' | 'admin.filter'
  | 'admin.active_only' | 'admin.all_records' | 'admin.status' | 'admin.identity' | 'admin.control' | 'admin.terminate' | 'admin.save' | 'admin.cancel' | 'admin.edit' | 'admin.del' | 'admin.inactive'
  | 'vs.select' | 'vs.create_btn' | 'vs.extract' | 'vs.modal_title' | 'vs.modal_placeholder' | 'vs.abort' | 'vs.launch' 
  | 'vs.agent' | 'vs.sum' | 'vs.add_agent_ph' | 'vs.inject' | 'vs.awaiting'
  | 'train.title' | 'train.desc' | 'train.generate' | 'train.candidates' | 'train.schedule' | 'train.conductor' | 'train.vip' | 'train.remaining_cost' | 'train.week'
  | 'train.mode_vip' | 'train.mode_guardian' | 'train.defender' | 'train.guardian' | 'train.search' | 'train.post' | 'train.copied' | 'train.public_view'
  | 'sts.title' | 'sts.power_boost' | 'sts.final_stand' | 'sts.fierce_assault' | 'sts.vigilant' | 'sts.extra_drill' | 'sts.barrack' | 'sts.focused' | 'sts.drill_exp' | 'sts.rapid' | 'sts.fatal'
  | 'manual.title' | 'manual.subtitle' | 'manual.faq.t10' | 'manual.faq.t10.ans' | 'manual.faq.update' | 'manual.faq.update.ans' | 'manual.faq.train' | 'manual.faq.train.ans'
  | 'day.mon' | 'day.tue' | 'day.wed' | 'day.thu' | 'day.fri' | 'day.sat' | 'day.sun'
  | 'credit.architect';

const translations: Record<Language, Record<TranslationKey, string>> = {
  english: {
    'nav.public': 'Command',
    'nav.admin': 'Admin Link',
    'nav.logout': 'Logout',
    'nav.home': 'Dashboard',
    'nav.train_public': 'Schedule',
    'nav.manual': 'Field Manual',
    'landing.welcome': 'GUN 1 Alliance Command',
    'landing.subtitle': 'Central Intelligence & Logistics Terminal',
    'landing.action.update': 'Update stats',
    'landing.action.update.desc': 'Submit latest stats to HQ.',
    'landing.action.view': 'Leaderboard',
    'landing.action.view.desc': 'View global alliance rankings.',
    'landing.action.train': 'Train Schedule',
    'landing.action.train.desc': 'View train schedule.',
    'landing.stat.members': 'Players',
    'landing.stat.power': 'Total Power',
    'landing.stat.active': 'Active Status',
    'form.title': 'Update stats',
    'form.success': 'Data Transmitted Successfully',
    'form.submit': 'Transmit Data',
    'form.saving': 'Encrypting...',
    'form.optional': 'Optional',
    'form.required_error': 'Mandatory fields missing.',
    'section.identity': '01 // Identity',
    'section.identity.desc': 'Verify commander credentials.',
    'section.power': '02 // Combat Power',
    'section.power.desc': 'Format: 24.5 = 24.5M',
    'section.tech': '03 // Technology',
    'section.tech.desc': 'Research status.',
    'section.infrastructure': 'BUILDINGS LEVEL',
    'section.infrastructure.desc': 'Base Facility Levels',
    'section.t10': '05 // T10 Protocol',
    'section.t10.desc': 'Tier 10 Requirements',
    'label.language': 'Region',
    'label.name': 'Player Name',
    'label.power': 'Squad 1 Power',
    'label.squad2': 'Squad 2',
    'label.squad3': 'Squad 3',
    'label.squad4': 'Squad 4',
    'label.totalHeroPower': 'Total Hero Power',
    'placeholder.server_rank': 'Rank',
    'hint.server_rank': 'Find in Server Rankings',
    'stat.hero': 'Hero %',
    'stat.duel': 'Duel %',
    'stat.units': 'Unit %',
    't10.title': 'T10 Bonuses',
    't10.morale': 'Morale',
    't10.protection': 'Protection',
    't10.hp': 'HP Boost',
    't10.atk': 'Atk Boost',
    't10.def': 'Def Boost',
    'sts.title': 'Siege to Seize',
    'sts.power_boost': 'Power Boost',
    'sts.final_stand': 'Final Stand',
    'sts.fierce_assault': 'Fierce Assault',
    'sts.vigilant': 'Vigilant Formation',
    'sts.extra_drill': 'Extra Drill Ground',
    'sts.barrack': 'Barrack Expansion',
    'sts.focused': 'Focused Training',
    'sts.drill_exp': 'Drill Ground Expansion',
    'sts.rapid': 'Rapid March',
    'sts.fatal': 'Fatal Strike',
    'calc.title': 'T10 Projector',
    'calc.gold': 'Gold',
    'calc.valor': 'Valor',
    'calc.food_iron': 'Food/Iron',
    'calc.remaining': 'Remaining Cost',
    'level.tech': 'Tech Center',
    'level.barracks': 'Barracks',
    'level.tank': 'Tank Center',
    'level.air': 'Air Center',
    'level.missile': 'Missile Center',
    'card.hero_pwr': 'HERO PWR',
    'card.tech_short': 'Tech',
    'card.barr_short': 'Barr',
    'card.tank_short': 'Tank',
    'card.air_short': 'Air',
    'card.misl_short': 'Misl',
    'viewer.leaderboard': 'Alliance Leaderboard',
    'viewer.search': 'Search player...',
    'viewer.sort': 'Sort Parameter',
    'viewer.showing': 'active',
    'viewer.no_results': 'No players found.',
    'viewer.updated': 'Last Sync',
    'viewer.export': 'Extract Data',
    'viewer.excel': 'Excel',
    'viewer.back': 'Abort',
    'sort.newest': 'Recent Update',
    'sort.oldest': 'Oldest Update',
    'sort.highest_power': 'Highest Power',
    'sort.lowest_power': 'Lowest Power',
    'sort.highest_total_hero_power': 'Highest Hero Pwr',
    'sort.lowest_total_hero_power': 'Lowest Hero Pwr',
    'sort.t10_closest': 'T10 Proximity',
    'admin.login.title': 'Command Access',
    'admin.login.btn': 'Authenticate',
    'admin.dashboard': 'Command Dashboard',
    'admin.password': 'Access Code',
    'admin.db': 'Database',
    'admin.vs': 'VS Tracker',
    'admin.train': 'Train',
    'admin.filter': 'Filter...',
    'admin.active_only': 'Active',
    'admin.all_records': 'All',
    'admin.status': 'Status',
    'admin.identity': 'Identity',
    'admin.control': 'Override',
    'admin.terminate': 'Terminate',
    'admin.save': 'Save',
    'admin.cancel': 'Cancel',
    'admin.edit': 'Edit',
    'admin.del': 'Purge',
    'admin.inactive': 'MIA',
    'vs.select': 'Operation',
    'vs.create_btn': '+ Op',
    'vs.extract': 'Export',
    'vs.modal_title': 'New Operation',
    'vs.modal_placeholder': 'Op Name',
    'vs.abort': 'Abort',
    'vs.launch': 'Launch',
    'vs.agent': 'Player',
    'vs.sum': 'Total',
    'vs.add_agent_ph': 'Add Player...',
    'vs.inject': 'Inject',
    'vs.awaiting': 'Awaiting Orders...',
    'train.title': 'Train Logistics',
    'train.desc': 'Automated Scheduler',
    'train.generate': 'Generate',
    'train.candidates': 'Queue',
    'train.schedule': 'Weekly Orders',
    'train.conductor': 'Conductor',
    'train.vip': 'Passenger',
    'train.remaining_cost': 'Cost',
    'train.week': 'Day',
    'train.mode_vip': 'VIP',
    'train.mode_guardian': 'Guardian',
    'train.defender': 'Defender',
    'train.guardian': 'Guardian',
    'train.search': 'Search...',
    'train.post': 'Copy Orders',
    'train.copied': 'Orders Copied',
    'train.public_view': 'Train Schedule',
    'manual.title': 'Field Manual',
    'manual.subtitle': 'Standard Operating Procedures',
    'manual.faq.t10': 'How is T10 Cost Calculated?',
    'manual.faq.t10.ans': 'The system analyzes your Barracks, Tech Center, and Research percentages. It calculates the raw Gold, Valor, and Food required to reach max level (30+).',
    'manual.faq.update': 'When should I update my stats?',
    'manual.faq.update.ans': 'Update your profile every Friday before the server reset or after significant power gains.',
    'manual.faq.train': 'How does the Train Scheduler work?',
    'manual.faq.train.ans': 'The algorithm prioritizes players closest to T10 (Lowest Gold Cost). It pairs stronger players (Conductors) with weaker ones (VIPs) to ensure train safety.',
    'day.mon': 'Monday',
    'day.tue': 'Tuesday',
    'day.wed': 'Wednesday',
    'day.thu': 'Thursday',
    'day.fri': 'Friday',
    'day.sat': 'Saturday',
    'day.sun': 'Sunday',
    'credit.architect': 'MADE BY AMINE',
  },
  arabic: {
    'nav.public': 'القيادة',
    'nav.admin': 'رابط المشرف',
    'nav.logout': 'خروج',
    'nav.home': 'لوحة القيادة',
    'nav.train_public': 'الجدول',
    'nav.manual': 'دليل الميدان',
    'landing.welcome': 'مركز قيادة GUN 1',
    'landing.subtitle': 'محطة الاستخبارات واللوجستيات المركزية',
    'landing.action.update': 'تحديث الملف',
    'landing.action.update.desc': 'إرسال أحدث إحصائيات للمقر.',
    'landing.action.view': 'قائمة الصدارة',
    'landing.action.view.desc': 'عرض التصنيف العالمي للتحالف.',
    'landing.action.train': 'جدول القطار',
    'landing.action.train.desc': 'عرض جدول القطار.',
    'landing.stat.members': 'اللاعبين',
    'landing.stat.power': 'القوة الكلية',
    'landing.stat.active': 'الحالة النشطة',
    'form.title': 'تحديث الإحصائيات',
    'form.success': 'تم إرسال البيانات بنجاح',
    'form.submit': 'إرسال البيانات',
    'form.saving': 'جاري التشفير...',
    'form.optional': 'اختياري',
    'form.required_error': 'حقول إجبارية مفقودة.',
    'section.identity': '01 // الهوية',
    'section.identity.desc': 'التحقق من بيانات القائد.',
    'section.power': '02 // القوة القتالية',
    'section.power.desc': 'التنسيق: 24.5 = 24.5 مليون',
    'section.tech': '03 // التكنولوجيا',
    'section.tech.desc': 'حالة الأبحاث.',
    'section.infrastructure': 'مستوى المباني',
    'section.infrastructure.desc': 'مستويات مباني القاعدة',
    'section.t10': '05 // بروتوكول T10',
    'section.t10.desc': 'متطلبات المستوى 10',
    'label.language': 'المنطقة',
    'label.name': 'اسم اللاعب',
    'label.power': 'قوة الفريق 1',
    'label.squad2': 'الفريق 2',
    'label.squad3': 'الفريق 3',
    'label.squad4': 'الفريق 4',
    'label.totalHeroPower': 'قوة الأبطال',
    'placeholder.server_rank': 'الرتبة',
    'hint.server_rank': 'تجدها في تصنيف السيرفر',
    'stat.hero': 'الأبطال %',
    'stat.duel': 'المبارزة %',
    'stat.units': 'الجنود %',
    't10.title': 'مكافآت T10',
    't10.morale': 'جبروت',
    't10.protection': 'حماية',
    't10.hp': 'صحة HP',
    't10.atk': 'هجوم',
    't10.def': 'دفاع',
    'sts.title': 'الاستيلاء على الحصار',
    'sts.power_boost': 'تعزيز القوة',
    'sts.final_stand': 'الوقوف الأخير',
    'sts.fierce_assault': 'هجوم عنيف',
    'sts.vigilant': 'تشكيل يقظ',
    'sts.extra_drill': 'أرض تدريب إضافية',
    'sts.barrack': 'توسيع الثكنة',
    'sts.focused': 'تدريب مركز',
    'sts.drill_exp': 'توسيع أرض التدريب',
    'sts.rapid': 'مسيرة سريعة',
    'sts.fatal': 'ضربة قاضية',
    'calc.title': 'مشروع T10',
    'calc.gold': 'ذهب',
    'calc.valor': 'شرف',
    'calc.food_iron': 'طعام/حديد',
    'calc.remaining': 'التكلفة المتبقية',
    'level.tech': 'التقنية',
    'level.barracks': 'الثكنة',
    'level.tank': 'الدبابات',
    'level.air': 'الطيران',
    'level.missile': 'الصواريخ',
    'card.hero_pwr': 'قوة أبطال',
    'card.tech_short': 'تقنية',
    'card.barr_short': 'ثكنة',
    'card.tank_short': 'دبابة',
    'card.air_short': 'طيران',
    'card.misl_short': 'صاروخ',
    'viewer.leaderboard': 'قائمة صدارة التحالف',
    'viewer.search': 'بحث عن لاعب...',
    'viewer.sort': 'معيار الفرز',
    'viewer.showing': 'نشط',
    'viewer.no_results': 'لم يتم العور على لاعبين.',
    'viewer.updated': 'آخر مزامنة',
    'viewer.export': 'استخراج البيانات',
    'viewer.excel': 'Excel',
    'viewer.back': 'إلغاء',
    'sort.newest': 'تحديث حديث',
    'sort.oldest': 'تحديث قديم',
    'sort.highest_power': 'الأعلى قوة',
    'sort.lowest_power': 'الأقل قوة',
    'sort.highest_total_hero_power': 'أعلى قوة أبطال',
    'sort.lowest_total_hero_power': 'أقل قوة أبطال',
    'sort.t10_closest': 'اقتراب T10',
    'admin.login.title': 'دخول القيادة',
    'admin.login.btn': 'مصادقة',
    'admin.dashboard': 'لوحة القيادة',
    'admin.password': 'رمز الوصول',
    'admin.db': 'قاعدة البيانات',
    'admin.vs': 'متتبع VS',
    'admin.train': 'قطار',
    'admin.filter': 'تصفية...',
    'admin.active_only': 'نشط',
    'admin.all_records': 'الكل',
    'admin.status': 'الحالة',
    'admin.identity': 'الهوية',
    'admin.control': 'تجاوز',
    'admin.terminate': 'إنهاء',
    'admin.save': 'حفظ',
    'admin.cancel': 'إلغاء',
    'admin.edit': 'تعديل',
    'admin.del': 'حذف',
    'admin.inactive': 'مفقود',
    'vs.select': 'عملية',
    'vs.create_btn': '+ عملية',
    'vs.extract': 'تصدير',
    'vs.modal_title': 'عملية جديدة',
    'vs.modal_placeholder': 'اسم العملية',
    'vs.abort': 'إلغاء',
    'vs.launch': 'إطلاق',
    'vs.agent': 'اللاعب',
    'vs.sum': 'المجموع',
    'vs.add_agent_ph': 'إضافة لاعب...',
    'vs.inject': 'إدراج',
    'vs.awaiting': 'بانتظار الأوامر...',
    'train.title': 'لوجستيات القطار',
    'train.desc': 'جدولة آلية',
    'train.generate': 'إنشاء',
    'train.candidates': 'طابور',
    'train.schedule': 'الأوامر الأسبوعية',
    'train.conductor': 'القائد',
    'train.vip': 'الراكب',
    'train.remaining_cost': 'التكلفة',
    'train.week': 'اليوم',
    'train.mode_vip': 'VIP',
    'train.mode_guardian': 'حارس',
    'train.defender': 'مدافع',
    'train.guardian': 'حارس',
    'train.search': 'بحث...',
    'train.post': 'نسخ الأوامر',
    'train.copied': 'تم نسخ الأوامر',
    'train.public_view': 'جدول القطار',
    'manual.title': 'دليل الميدان',
    'manual.subtitle': 'إجراءات التشغيل القياسية',
    'manual.faq.t10': 'كيف يتم حساب تكلفة T10؟',
    'manual.faq.t10.ans': 'يقوم النظام بتحليل الثكنات، مركز التقنية، ونسب الأبحاث لحساب الذهب، الشرف، والطعام المطلوب للوصول للمستوى الأقصى.',
    'manual.faq.update': 'متى يجب تحديث الإحصائيات؟',
    'manual.faq.update.ans': 'قم بتحديث ملفك كل جمعة قبل إعادة تعيين السيرفر أو بعد زيادة القوة بشكل ملحوظ.',
    'manual.faq.train': 'كيف يعمل جدول القطار؟',
    'manual.faq.train.ans': 'الخوارزمية تعطي الأولوية للاعبين الأقرب لـ T10 (أقل تكلفة ذهب). يتم إقران الأقوياء (القادة) مع الأضعف (VIP) لضمان السلامة.',
    'day.mon': 'الإثنين',
    'day.tue': 'الثلاثاء',
    'day.wed': 'الأربعاء',
    'day.thu': 'الخميس',
    'day.fri': 'الجمعة',
    'day.sat': 'السبت',
    'day.sun': 'الأحد',
    'credit.architect': 'صنع بواسطة: أمين',
  },
  turkish: {
    'nav.public': 'Komuta',
    'nav.admin': 'Yönetici',
    'nav.logout': 'Çıkış',
    'nav.home': 'Panel',
    'nav.train_public': 'Program',
    'nav.manual': 'Saha Kılavuzu',
    'landing.welcome': 'GUN 1 Komuta Merkezi',
    'landing.subtitle': 'Merkezi İstihbarat ve Lojistik Terminali',
    'landing.action.update': 'İstatistikleri güncelle',
    'landing.action.update.desc': 'Son istatistikleri Karargaha gönder.',
    'landing.action.view': 'Liderlik Tablosu',
    'landing.action.view.desc': 'Küresel ittifak sıralamasını gör.',
    'landing.action.train': 'Tren Programı',
    'landing.action.train.desc': 'Tren programını görüntüle.',
    'landing.stat.members': 'Oyuncular',
    'landing.stat.power': 'Toplam Güç',
    'landing.stat.active': 'Aktif Durum',
    'form.title': 'İstatistikleri güncelle',
    'form.success': 'Veri Başarıyla İletildi',
    'form.submit': 'Veri İlet',
    'form.saving': 'Şifreleniyor...',
    'form.optional': 'İsteğe Bağlı',
    'form.required_error': 'Zorunlu alanlar eksik.',
    'section.identity': '01 // Kimlik',
    'section.identity.desc': 'Komutan bilgilerini doğrula.',
    'section.power': '02 // Savaş Gücü',
    'section.power.desc': 'Format: 24.5 = 24.5M',
    'section.tech': '03 // Teknoloji',
    'section.tech.desc': 'Araştırma durumu.',
    'section.infrastructure': 'BİNA SEVİYELERİ',
    'section.infrastructure.desc': 'Üs Bina Seviyeleri',
    'section.t10': '05 // T10 Protokolü',
    'section.t10.desc': 'Seviye 10 Gereksinimleri',
    'label.language': 'Bölge',
    'label.name': 'Oyuncu Adı',
    'label.power': '1. Takım Gücü',
    'label.squad2': '2. Takım',
    'label.squad3': '3. Takım',
    'label.squad4': '4. Takım',
    'label.totalHeroPower': 'Toplam Kahraman Gücü',
    'placeholder.server_rank': 'Sıra',
    'hint.server_rank': 'Sunucu Sıralamasında Bul',
    'stat.hero': 'Kahraman %',
    'stat.duel': 'Düello %',
    'stat.units': 'Birim %',
    't10.title': 'T10 Bonusları',
    't10.morale': 'Moral',
    't10.protection': 'Koruma',
    't10.hp': 'Can',
    't10.atk': 'Saldırı',
    't10.def': 'Savunma',
    'calc.title': 'T10 Projeksiyonu',
    'calc.gold': 'Altın',
    'calc.valor': 'Cesaret',
    'calc.food_iron': 'Yiyecek/Demir',
    'calc.remaining': 'Kalan Maliyet',
    'level.tech': 'Teknoloji',
    'level.barracks': 'Kışla',
    'level.tank': 'Tank',
    'level.air': 'Hava',
    'level.missile': 'Füze',
    'card.hero_pwr': 'KAHRAMAN',
    'card.tech_short': 'Tek',
    'card.barr_short': 'Kışla',
    'card.tank_short': 'Tank',
    'card.air_short': 'Hava',
    'card.misl_short': 'Füze',
    'viewer.leaderboard': 'İttifak Liderlik Tablosu',
    'viewer.search': 'Oyuncu ara...',
    'viewer.sort': 'Sıralama Parametresi',
    'viewer.showing': 'aktif',
    'viewer.no_results': 'Oyuncu bulunamadı.',
    'viewer.updated': 'Son Senk',
    'viewer.export': 'Veri Çıkar',
    'viewer.excel': 'Excel',
    'viewer.back': 'İptal',
    'sort.newest': 'Yeni Güncelleme',
    'sort.oldest': 'Eski Güncelleme',
    'sort.highest_power': 'En Yüksek Güç',
    'sort.lowest_power': 'En Düşük Güç',
    'sort.highest_total_hero_power': 'Yüksek Kahraman Gücü',
    'sort.lowest_total_hero_power': 'Düşük Kahraman Gücü',
    'sort.t10_closest': "T10'a Yakınlık",
    'admin.login.title': 'Komuta Erişimi',
    'admin.login.btn': 'Doğrula',
    'admin.dashboard': 'Komuta Paneli',
    'admin.password': 'Erişim Kodu',
    'admin.db': 'Veritabanı',
    'admin.vs': 'VS Takip',
    'admin.train': 'Tren',
    'admin.filter': 'Filtre...',
    'admin.active_only': 'Aktif',
    'admin.all_records': 'Tümü',
    'admin.status': 'Durum',
    'admin.identity': 'Kimlik',
    'admin.control': 'Geçersiz Kıl',
    'admin.terminate': 'Sonlandır',
    'admin.save': 'Kaydet',
    'admin.cancel': 'İptal',
    'admin.edit': 'Düzenle',
    'admin.del': 'Temizle',
    'admin.inactive': 'Kayıp',
    'vs.select': 'Operasyon',
    'vs.create_btn': '+ Ops',
    'vs.extract': 'Dışa Aktar',
    'vs.modal_title': 'Yeni Operasyon',
    'vs.modal_placeholder': 'Ops İsmi',
    'vs.abort': 'İptal',
    'vs.launch': 'Başlat',
    'vs.agent': 'Oyuncu',
    'vs.sum': 'Toplam',
    'vs.add_agent_ph': 'Oyuncu Ekle...',
    'vs.inject': 'Ekle',
    'vs.awaiting': 'Emir Bekleniyor...',
    'train.title': 'Tren Lojistiği',
    'train.desc': 'Otomatik Zamanlayıcı',
    'train.generate': 'Oluştur',
    'train.candidates': 'Kuyruk',
    'train.schedule': 'Haftalık Emirler',
    'train.conductor': 'Kondüktör',
    'train.vip': 'Yolcu',
    'train.remaining_cost': 'Maliyet',
    'train.week': 'Gün',
    'train.mode_vip': 'VIP',
    'train.mode_guardian': 'Koruyucu',
    'train.defender': 'Savunmacı',
    'train.guardian': 'Koruyucu',
    'train.search': 'Ara...',
    'train.post': 'Emirleri Kopyala',
    'train.copied': 'Emirler Kopyalandı',
    'train.public_view': 'Tren Programı',
    'sts.title': 'Kuşatmayı Ele Geçir',
    'sts.power_boost': 'Güç Artışı',
    'sts.final_stand': 'Son Direniş',
    'sts.fierce_assault': 'Şiddetli Saldırı',
    'sts.vigilant': 'Uyanık Formasyon',
    'sts.extra_drill': 'Ekstra Talim Alanı',
    'sts.barrack': 'Kışla Genişletme',
    'sts.focused': 'Odaklanmış Eğitim',
    'sts.drill_exp': 'Talim Alanı Genişletme',
    'sts.rapid': 'Hızlı Yürüyüş',
    'sts.fatal': 'Ölümcül Vuruş',
    'manual.title': 'Saha Kılavuzu',
    'manual.subtitle': 'Standart Operasyon Prosedürleri',
    'manual.faq.t10': 'T10 Maliyeti Nasıl Hesaplanır?',
    'manual.faq.t10.ans': 'Sistem; Kışla, Teknoloji Merkezi ve Araştırma yüzdelerinizi analiz eder. Maksimum seviyeye (30+) ulaşmak için gereken saf Altın, Cesaret ve Yiyeceği hesaplar.',
    'manual.faq.update': 'İstatistikleri ne zaman güncellemeliyim?',
    'manual.faq.update.ans': 'Profilinizi her Cuma sunucu sıfırlanmadan önce veya önemli güç artışlarından sonra güncelleyin.',
    'manual.faq.train': 'Tren Zamanlayıcı nasıl çalışır?',
    'manual.faq.train.ans': 'Algoritma, T10\'a en yakın oyunculara (En Düşük Altın Maliyeti) öncelik verir. Güvenliği sağlamak için güçlü oyuncular (Kondüktörler) daha zayıf olanlarla (VIP) eşleştirilir.',
    'day.mon': 'Pazartesi',
    'day.tue': 'Salı',
    'day.wed': 'Çarşamba',
    'day.thu': 'Perşembe',
    'day.fri': 'Cuma',
    'day.sat': 'Cumartesi',
    'day.sun': 'Pazar',
    'credit.architect': 'YAPIMCI: AMINE',
  },
  indonesian: {
    'nav.public': 'Komando',
    'nav.admin': 'Link Admin',
    'nav.logout': 'Keluar',
    'nav.home': 'Dasbor',
    'nav.train_public': 'Jadwal',
    'nav.manual': 'Panduan Lapangan',
    'landing.welcome': 'Pusat Komando GUN 1',
    'landing.subtitle': 'Terminal Intelijen & Logistik Pusat',
    'landing.action.update': 'Perbarui statistik',
    'landing.action.update.desc': 'Kirim statistik terbaru ke HQ.',
    'landing.action.view': 'Papan Peringkat',
    'landing.action.view.desc': 'Lihat peringkat aliansi global.',
    'landing.action.train': 'Jadwal Kereta',
    'landing.action.train.desc': 'Lihat jadwal kereta.',
    'landing.stat.members': 'Pemain',
    'landing.stat.power': 'Total Kekuatan',
    'landing.stat.active': 'Status Aktif',
    'form.title': 'Perbarui statistik',
    'form.success': 'Data Berhasil Dikirim',
    'form.submit': 'Kirim Data',
    'form.saving': 'Mengenkripsi...',
    'form.optional': 'Opsional',
    'form.required_error': 'Kolom wajib tidak diisi.',
    'section.identity': '01 // Identitas',
    'section.identity.desc': 'Verifikasi kredensial komandan.',
    'section.power': '02 // Kekuatan Tempur',
    'section.power.desc': 'Format: 24.5 = 24.5M',
    'section.tech': '03 // Teknologi',
    'section.tech.desc': 'Status riset.',
    'section.infrastructure': 'LEVEL BANGUNAN',
    'section.infrastructure.desc': 'Level Fasilitas Markas',
    'section.t10': '05 // Protokol T10',
    'section.t10.desc': 'Persyaratan Tier 10',
    'label.language': 'Wilayah',
    'label.name': 'Nama Pemain',
    'label.power': 'Kekuatan Pasukan 1',
    'label.squad2': 'Pasukan 2',
    'label.squad3': 'Pasukan 3',
    'label.squad4': 'Pasukan 4',
    'label.totalHeroPower': 'Kekuatan Hero',
    'placeholder.server_rank': 'Peringkat',
    'hint.server_rank': 'Temukan di Peringkat Server',
    'stat.hero': 'Hero %',
    'stat.duel': 'Duel %',
    'stat.units': 'Unit %',
    't10.title': 'Bonus T10',
    't10.morale': 'Moral',
    't10.protection': 'Proteksi',
    't10.hp': 'HP',
    't10.atk': 'Serangan',
    't10.def': 'Pertahanan',
    'sts.title': 'Siege to Seize',
    'sts.power_boost': 'Power Boost',
    'sts.final_stand': 'Final Stand',
    'sts.fierce_assault': 'Fierce Assault',
    'sts.vigilant': 'Vigilant Formation',
    'sts.extra_drill': 'Extra Drill Ground',
    'sts.barrack': 'Barrack Expansion',
    'sts.focused': 'Focused Training',
    'sts.drill_exp': 'Drill Ground Expansion',
    'sts.rapid': 'Rapid March',
    'sts.fatal': 'Fatal Strike',
    'calc.title': 'Proyeksi T10',
    'calc.gold': 'Emas',
    'calc.valor': 'Valor',
    'calc.food_iron': 'Makan/Besi',
    'calc.remaining': 'Sisa Biaya',
    'level.tech': 'Teknologi',
    'level.barracks': 'Barak',
    'level.tank': 'Tank',
    'level.air': 'Udara',
    'level.missile': 'Rudal',
    'card.hero_pwr': 'HERO PWR',
    'card.tech_short': 'Tek',
    'card.barr_short': 'Bar',
    'card.tank_short': 'Tank',
    'card.air_short': 'Udara',
    'card.misl_short': 'Rudal',
    'viewer.leaderboard': 'Papan Peringkat Aliansi',
    'viewer.search': 'Cari pemain...',
    'viewer.sort': 'Parameter Sortir',
    'viewer.showing': 'aktif',
    'viewer.no_results': 'Pemain tidak ditemukan.',
    'viewer.updated': 'Sinkron Terakhir',
    'viewer.export': 'Ekstrak Data',
    'viewer.excel': 'Excel',
    'viewer.back': 'Batal',
    'sort.newest': 'Update Terbaru',
    'sort.oldest': 'Update Terlama',
    'sort.highest_power': 'Kekuatan Tertinggi',
    'sort.lowest_power': 'Kekuatan Terendah',
    'sort.highest_total_hero_power': 'Hero Tertinggi',
    'sort.lowest_total_hero_power': 'Hero Terendah',
    'sort.t10_closest': 'Kedekatan T10',
    'admin.login.title': 'Akses Komando',
    'admin.login.btn': 'Otentikasi',
    'admin.dashboard': 'Dasbor Komando',
    'admin.password': 'Kode Akses',
    'admin.db': 'Database',
    'admin.vs': 'Pelacak VS',
    'admin.train': 'Kereta',
    'admin.filter': 'Filter...',
    'admin.active_only': 'Aktif',
    'admin.all_records': 'Semua',
    'admin.status': 'Status',
    'admin.identity': 'Identitas',
    'admin.control': 'Timpa',
    'admin.terminate': 'Keluar',
    'admin.save': 'Simpan',
    'admin.cancel': 'Batal',
    'admin.edit': 'Ubah',
    'admin.del': 'Hapus',
    'admin.inactive': 'MIA',
    'vs.select': 'Operasi',
    'vs.create_btn': '+ Ops',
    'vs.extract': 'Ekspor',
    'vs.modal_title': 'Operasi Baru',
    'vs.modal_placeholder': 'Nama Ops',
    'vs.abort': 'Batal',
    'vs.launch': 'Mulai',
    'vs.agent': 'Pemain',
    'vs.sum': 'Total',
    'vs.add_agent_ph': 'Tambah pemain...',
    'vs.inject': 'Masuk',
    'vs.awaiting': 'Menunggu Perintah...',
    'train.title': 'Logistik Kereta',
    'train.desc': 'Penjadwal Otomatis',
    'train.generate': 'Buat',
    'train.candidates': 'Antrean',
    'train.schedule': 'Perintah Mingguan',
    'train.conductor': 'Kondektur',
    'train.vip': 'Penumpang',
    'train.remaining_cost': 'Biaya',
    'train.week': 'Hari',
    'train.mode_vip': 'VIP',
    'train.mode_guardian': 'Pelindung',
    'train.defender': 'Pembela',
    'train.guardian': 'Wali',
    'train.search': 'Cari...',
    'train.post': 'Salin Perintah',
    'train.copied': 'Perintah Disalin',
    'train.public_view': 'Jadwal Kereta',
    'manual.title': 'Panduan Lapangan',
    'manual.subtitle': 'Prosedur Operasi Standar',
    'manual.faq.t10': 'Bagaimana Biaya T10 Dihitung?',
    'manual.faq.t10.ans': 'Sistem menganalisis Barak, Pusat Teknologi, dan persentase Riset Anda. Ini menghitung Emas, Valor, dan Makanan murni yang diperlukan untuk mencapai level maksimal (30+).',
    'manual.faq.update': 'Kapan saya harus memperbarui statistik?',
    'manual.faq.update.ans': 'Perbarui profil Anda setiap hari Jumat sebelum reset server atau setelah peningkatan kekuatan yang signifikan.',
    'manual.faq.train': 'Bagaimana cara kerja Jadwal Kereta?',
    'manual.faq.train.ans': 'Algoritme memprioritaskan pemain yang paling dekat dengan T10 (Biaya Emas Terendah). Ini memasangkan pemain kuat (Kondektur) with yang lebih lemah (VIP) untuk memastikan keselamatan kereta.',
    'day.mon': 'Senin',
    'day.tue': 'Selasa',
    'day.wed': 'Rabu',
    'day.thu': 'Kamis',
    'day.fri': 'Jumat',
    'day.sat': 'Sabtu',
    'day.sun': 'Minggu',
    'credit.architect': 'DIBUAT OLEH: AMINE',
  }
};

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: TranslationKey) => string;
  dir: 'ltr' | 'rtl';
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>('english');

  useEffect(() => {
    // Detect Browser Language
    const browserLang = navigator.language.split('-')[0];
    if (browserLang === 'ar') setLanguage('arabic');
    else if (browserLang === 'tr') setLanguage('turkish');
    else if (browserLang === 'id') setLanguage('indonesian');
    else setLanguage('english');
  }, []);

  const t = (key: TranslationKey): string => {
    return translations[language][key] || key;
  };

  const dir = language === 'arabic' ? 'rtl' : 'ltr';

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, dir }}>
      <div dir={dir} className={language === 'arabic' ? 'font-sans' : ''}>
        {children}
      </div>
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};